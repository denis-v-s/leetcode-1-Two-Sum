<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Two Sum Animation - GitHub Pages Compatible</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>body { background:#f5f5f5; }</style>
</head>
<body>
  <div id="root"></div>

  <script>
    const { useState, useRef } = React;
    const { motion } = window['framer-motion'];

    function App() {
      const [numsInput, setNumsInput] = useState("2,7,11,15");
      const [targetInput, setTargetInput] = useState("9");
      const [nums, setNums] = useState([2,7,11,15]);
      const [target, setTarget] = useState(9);

      const [steps, setSteps] = useState([]);
      const [stepIndex, setStepIndex] = useState(0);
      const [isPlaying, setIsPlaying] = useState(false);
      const intervalRef = useRef(null);

      const testCases = {
        "Simple Match Early": { nums: "2,7,11,15", target: "9" },
        "Match Late": { nums: "3,2,4,8,10", target: "14" },
        "Negative Numbers": { nums: "-3,4,3,90", target: "0" },
        "Duplicates": { nums: "1,5,1,5", target: "6" },
        "Large Case": { nums: "10,15,3,7,8,2,11,14", target: "17" }
      };

      function computeSteps(arr, tgt) {
        const history = [];
        const m = {};

        history.push({i:-1, num:null, compl:null, map:{...m}, desc:"Start"});

        for (let i=0; i<arr.length; i++){
          const num = arr[i];
          const compl = tgt - num;

          history.push({i, num, compl, map:{...m}, desc:(compl in m) ? `Found complement ${compl}` : `Check ${compl}`});
          if (compl in m) return history;

          m[num] = i;
          history.push({i, num, compl, map:{...m}, desc:`Inserted ${num}:${i}`});
        }

        history.push({i:arr.length, map:{...m}, desc:"No solution"});
        return history;
      }

      function load() {
        const arr = numsInput.split(',').map(x => parseInt(x.trim())).filter(x=>!isNaN(x));
        const tgt = parseInt(targetInput);
        setNums(arr);
        setTarget(tgt);
        const s = computeSteps(arr, tgt);
        setSteps(s);
        setStepIndex(0);
        setIsPlaying(false);
        clearInterval(intervalRef.current);
      }

      function play(){
        if(isPlaying || steps.length===0) return;
        setIsPlaying(true);
        intervalRef.current = setInterval(()=>{
          setStepIndex(prev => {
            if(prev+1 >= steps.length){ clearInterval(intervalRef.current); setIsPlaying(false); return prev; }
            return prev+1;
          });
        },900);
      }

      function pause(){ setIsPlaying(false); clearInterval(intervalRef.current); }
      function stepForward(){ setStepIndex(i => Math.min(i+1, steps.length-1)); }
      function stepBack(){ setStepIndex(i => Math.max(i-1, 0)); }

      const current = steps[stepIndex] || {};

      return React.createElement("div", {className:"p-6 max-w-4xl mx-auto space-y-4"},
        React.createElement("h1", {className:"text-2xl font-bold"}, "Two Sum – GitHub Pages Version"),

        React.createElement("div", {className:"grid grid-cols-1 md:grid-cols-4 gap-4"},
          React.createElement("input", {
            className:"border p-2 rounded",
            value:numsInput,
            onChange:e=>setNumsInput(e.target.value)
          }),
          React.createElement("input", {
            className:"border p-2 rounded",
            value:targetInput,
            onChange:e=>setTargetInput(e.target.value)
          }),
          React.createElement("select", {
            className:"border p-2 rounded",
            onChange:e=>{
              const t = testCases[e.target.value];
              if(t){ setNumsInput(t.nums); setTargetInput(t.target);} }
          },[
            React.createElement("option", {key:"x"}, "Select Test Case"),
            ...Object.keys(testCases).map(k=>React.createElement("option", {key:k}, k))
          ]),
          React.createElement("button", {className:"bg-blue-600 text-white p-2 rounded", onClick:load}, "Load")
        ),

        React.createElement("div", {className:"flex space-x-3"},[
          React.createElement("button", {className:"p-2 border rounded", onClick:stepBack}, "⟵ Back"),
          isPlaying ?
            React.createElement("button", {className:"p-2 border rounded", onClick:pause}, "Pause") :
            React.createElement("button", {className:"p-2 border rounded", onClick:play}, "Play"),
          React.createElement("button", {className:"p-2 border rounded", onClick:stepForward}, "Forward ⟶")
        ]),

        React.createElement("div", {className:"p-4 border rounded bg-white"},
          React.createElement("h2", {className:"font-semibold mb-2"}, "Array"),
          React.createElement("div", {className:"flex space-x-2"},
            nums.map((n,idx)=>React.createElement(motion.div, {
              key:idx,
              animate:{ scale: current.i===idx?1.2:1 }
            },
              React.createElement("div", {className:"p-3 bg-gray-100 border rounded"}, `${n} (${idx})`)
            ))
          )
        ),

        React.createElement("div", {className:"p-4 border rounded bg-white"},
          React.createElement("h2", {className:"font-semibold mb-2"}, "Hash Map"),
          React.createElement("div", {},
            current.map ? Object.entries(current.map).map(([k,v])=>
              React.createElement("div", {key:k, className:"p-2 bg-gray-100 border rounded mb-1"}, `${k} → ${v}`)
            ) : "(empty)"
          )
        ),

        React.createElement("div", {className:"p-3 border rounded bg-white"}, current.desc || "Press Load")
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>
